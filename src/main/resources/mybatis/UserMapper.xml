<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="win.ots.hello.dao.UserDao">

    <resultMap id="userResultMap" type="win.ots.hello.entity.User">
        <id column="id" property="id"/> 
        <result column="userName" property="userName"/> 
        <result column="password" property="password"/> 
        <result column="nickName" property="nickName"/> 
        <result column="phone" property="phone"/> 
        <result column="email" property="email"/> 
        <result column="avatar" property="avatar"/> 
        <result column="sex" property="sex"/> 
        <result column="registerDate" property="registerDate"/>
        
    </resultMap>

    <sql id="userColumns">
        tbl_user.id AS "id",
        tbl_user.user_name AS "userName",
        tbl_user.password AS "password",
        tbl_user.nick_name AS "nickName",
        tbl_user.phone AS "phone",
        tbl_user.email AS "email",
        tbl_user.avatar AS "avatar",
        tbl_user.sex AS "sex",
        tbl_user.register_date AS "registerDate"
    </sql>

    <sql id="userJoins">
        
    </sql>

    <select id="get" resultMap="userResultMap">
        SELECT
        <include refid="userColumns" />
        FROM tbl_user <include refid="userJoins" />
        <where>
        tbl_user.id = #{id}
        </where>
    </select>

    <select id="findList" resultMap="userResultMap">
        SELECT
        <include refid="userColumns" />
        FROM tbl_user <include refid="userJoins" />
        <where>
        </where>
    </select>

    <select id="findAllList" resultMap="userResultMap">
        SELECT
        <include refid="userColumns" />
        FROM tbl_user <include refid="userJoins" />
        <where>
        </where>
    </select>

    <insert id="insert">
        INSERT INTO tbl_user(
            id,
            user_name,
            password,
            nick_name,
            phone,
            email,
            avatar,
            sex,
            register_date
        )
        VALUES (
            #{id},
            #{userName},
            #{password},
            #{nickName},
            #{phone},
            #{email},
            #{avatar},
            #{sex},
            #{registerDate}
        )
    </insert>

    <insert id="insertBatch">
        INSERT INTO tbl_user(
            id,
            user_name,
            password,
            nick_name,
            phone,
            email,
            avatar,
            sex,
            register_date
        )
        VALUES
        <foreach collection ="list" item="user" separator =",">
        (
            #{user.id},
            #{user.userName},
            #{user.password},
            #{user.nickName},
            #{user.phone},
            #{user.email},
            #{user.avatar},
            #{user.sex},
            #{user.registerDate}
        )
        </foreach>
    </insert>

    <update id="update">
        UPDATE tbl_user SET
        id = #{id},
        user_name = #{userName},
        password = #{password},
        nick_name = #{nickName},
        phone = #{phone},
        email = #{email},
        avatar = #{avatar},
        sex = #{sex},
        register_date = #{registerDate}
        WHERE id = #{id}
    </update>

    <update id="delete">
        DELETE FROM tbl_user
        WHERE id = #{id}
    </update>

</mapper>